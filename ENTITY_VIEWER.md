# 📦 엔티티 뷰어 (Entity Viewer)

## 개요

**엔티티 뷰어**는 LangExtract가 추출한 구조화된 엔티티를 **현대적이고 직관적인 카드 형태**로 보여주는 전용 UI입니다.

기존의 시각화 기능(Visualization)과의 차이점:
- **시각화**: 원본 텍스트에서 엔티티를 **어디서 추출했는지** 하이라이트로 표시
- **엔티티 뷰어**: 추출된 엔티티를 **구조화된 형태**로 카드/테이블로 정리하여 표시

---

## 🎨 주요 기능

### 1. 현대적인 디자인
- **다크 테마**: 눈에 편안한 다크 그라데이션 배경
- **카드 UI**: 각 엔티티를 아름다운 카드 형태로 표시
- **색상 코딩**: 엔티티 타입별로 고유한 색상 테두리
- **애니메이션**: 부드러운 fade-in, hover 효과
- **반응형**: 모바일, 태블릿, 데스크톱 모두 지원

### 2. 엔티티 타입별 구분
각 엔티티는 타입에 따라 다른 아이콘과 색상으로 표시됩니다:

#### 회의록 프로필 (meeting)
- 📌 **안건** (Agenda) - 보라색
- ✅ **결정사항** (Decision) - 녹색
- 📝 **액션아이템** (Action Item) - 주황색
- 💬 **중요발언** (Key Statement) - 파란색

#### 기술 리뷰 프로필 (tech_review)
- ⚡ **기능** (Feature) - 청록색
- 🏗️ **아키텍처** (Architecture) - 보라색
- 📋 **요구사항** (Requirement) - 주황색
- ⚠️ **제한사항** (Limitation) - 빨간색
- 💡 **예시** (Example) - 청록색

#### 리서치 프로필 (research)
- 🔍 **발견사항** (Finding) - 청록색
- 📊 **데이터** (Data Point) - 인디고
- ⚖️ **비교** (Comparison) - 보라색
- 💡 **권고사항** (Recommendation) - 녹색
- 📚 **참고자료** (Reference) - 파란색

#### 일반 프로필 (general)
- ⭐ **핵심내용** (Key Point) - 청록색
- 🏷️ **개체** (Entity) - 회색
- 🔗 **관계** (Relation) - 인디고

### 3. 통계 대시보드
추출 결과에 대한 요약 통계를 한눈에:
- 📊 총 엔티티 개수
- 🏷️ 엔티티 타입 수
- 📈 평균 신뢰도
- 🔬 사용된 프로필

### 4. 필터링 기능
- **전체** 보기
- **타입별** 필터 (안건만, 결정사항만, 액션아이템만 등)
- 각 필터에 개수 표시
- 클릭 한 번으로 필터 전환

### 5. 신뢰도 표시
각 엔티티마다 LangExtract의 **추출 신뢰도**를 시각적으로 표시:
- 백분율 숫자
- 그라데이션 프로그레스바 (노란색 → 녹색)

### 6. 필드 상세 정보
엔티티에 연결된 모든 필드를 깔끔하게 표시:
- `assignee`: 담당자
- `deadline`: 기한
- `topic`: 주제
- `content`: 내용
- `status`: 상태
- 등등...

---

## 🚀 사용 방법

### 방법 1: Web UI에서 바로 열기

1. **Web UI 실행**
   ```bash
   python -m src.main ui
   ```

2. **엔티티 뷰어 버튼 클릭**
   - 왼쪽 패널 하단의 **📦 버튼** 클릭
   - 새 탭에서 엔티티 뷰어 열림

### 방법 2: 직접 URL 접속

```
http://127.0.0.1:8501/entities
```

### 사용 순서

1. **소스 추가**
   - URL, 검색어, 파일 경로 입력
   - '+' 버튼으로 추가
   - 여러 소스 추가 가능

2. **프로필 선택**
   - 일반 (general)
   - 회의록 (meeting)
   - 기술 리뷰 (tech_review)
   - 리서치 (research)

3. **엔티티 추출**
   - "🔬 엔티티 추출" 버튼 클릭
   - 1-2분 대기 (LangExtract 처리)

4. **결과 확인**
   - 통계 대시보드 확인
   - 필터로 타입별 탐색
   - 각 엔티티 카드 상세 정보 확인

---

## 📸 UI 스크린샷 (예시)

### 전체 화면
```
┌─────────────────────────────────────────────────┐
│ 🔬 LangExtract 엔티티 뷰어                       │
│ 구조화된 정보 추출 결과를 시각적으로 확인하세요   │
└─────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────┐
│ 📥 소스 입력                                    │
│ [URL, 검색어, 파일 경로...] [회의록 ▼] [+ 추가] │
│ • test_meeting.txt                     [삭제]   │
└─────────────────────────────────────────────────┘

┌──────────┬──────────┬──────────┬──────────┐
│ 총 엔티티 │ 엔티티 타입│ 평균 신뢰도│ 프로필   │
│    8     │    4     │   92%   │ meeting  │
└──────────┴──────────┴──────────┴──────────┘

[전체: 8] [안건: 2] [결정사항: 2] [액션아이템: 2] [중요발언: 2]

┌─────────────────────────────┐ ┌─────────────────────────────┐
│ 📌 안건              92% ▓▓▓│ │ ✅ 결정사항          95% ▓▓▓│
│                             │ │                             │
│ 마케팅 예산 증액              │ │ 마케팅 예산 20% 증액 승인    │
│                             │ │                             │
│ topic: 예산                 │ │ content: 마케팅 예산 20% 증액│
│ content: 다음 분기 마케팅 예산│ │ status: 승인                │
└─────────────────────────────┘ └─────────────────────────────┘

┌─────────────────────────────┐
│ 📝 액션아이템        88% ▓▓░│
│                             │
│ 예산 계획서 작성              │
│                             │
│ assignee: 이대리            │
│ content: 상세 예산 계획서 작성│
│ deadline: 3월 15일          │
└─────────────────────────────┘
```

---

## 🎯 실전 예제

### 예제 1: 회의록 엔티티 추출

#### 입력
```
소스: test_meeting.txt
프로필: 회의록 (meeting)
```

#### 결과
- **8개 엔티티** 추출
  - 안건 2개
  - 결정사항 2개
  - 액션아이템 2개
  - 중요발언 2개
- **평균 신뢰도**: 92%

#### 카드 예시
```
┌──────────────────────────────────────┐
│ 📌 안건                      92% ▓▓▓ │
│                                      │
│ 다음 분기 마케팅 예산 증액             │
│                                      │
│ topic: 예산 증액                     │
│ content: 다음 분기 마케팅 예산 20% 증액│
└──────────────────────────────────────┘
```

### 예제 2: 기술 문서 엔티티 추출

#### 입력
```
소스: search:Python FastAPI tutorial
프로필: 기술 리뷰 (tech_review)
```

#### 결과
- **12개 엔티티** 추출
  - 기능 4개
  - 아키텍처 2개
  - 요구사항 3개
  - 제한사항 2개
  - 예시 1개
- **평균 신뢰도**: 89%

#### 카드 예시
```
┌──────────────────────────────────────┐
│ ⚡ 기능                       94% ▓▓▓│
│                                      │
│ 자동 API 문서 생성                    │
│                                      │
│ name: API Documentation              │
│ description: Swagger UI 자동 생성     │
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ 📋 요구사항                   91% ▓▓▓│
│                                      │
│ Python 3.7 이상                      │
│                                      │
│ type: Runtime                        │
│ version: 3.7+                        │
└──────────────────────────────────────┘
```

---

## 🎨 디자인 특징

### 색상 팔레트
- **배경**: 다크 그라데이션 (#0a0a0f → #1a1a2e)
- **카드**: 반투명 서피스 (#1a1a2e)
- **액센트**: 핑크-레드 그라데이션 (#ff6b9d → #c44569)
- **텍스트**: 밝은 회색 (#e8e8f0)
- **타입별 색상**: 보라, 녹색, 주황, 파랑, 청록, 빨강 등

### 타이포그래피
- **폰트**: 시스템 UI 폰트 (-apple-system, Segoe UI 등)
- **제목**: 2em, 굵게, 그라데이션
- **본문**: 1.05em, 중간 굵기
- **라벨**: 0.8em, 대문자, 자간 넓게

### 레이아웃
- **반응형 그리드**: auto-fill, minmax(350px, 1fr)
- **카드 간격**: 20px
- **패딩**: 넉넉한 여백 (20-32px)
- **둥근 모서리**: 8-16px border-radius

### 애니메이션
- **fade-in**: 0.5초, ease
- **hover**: transform translateY(-4px)
- **shadow**: 레이어별 깊이감
- **transition**: 0.2-0.3초, smooth

---

## 🔧 기술 스택

### Backend
- **API 엔드포인트**: `/api/extract_entities` (POST)
- **LangExtract**: 구조화 추출 엔진
- **Ollama**: gemma2:2b 모델 (로컬 LLM)

### Frontend
- **HTML5 + CSS3**: 순수 웹 표준
- **Vanilla JavaScript**: 프레임워크 없이 경량화
- **Flexbox + Grid**: 현대적 레이아웃
- **CSS Variables**: 테마 관리

### 데이터 흐름
```
소스 입력
   ↓
Router.extract_many()
   ↓
StructuredExtractor.extract()
   ↓
JSON 엔티티 데이터
   ↓
Frontend 렌더링
   ↓
카드 UI 표시
```

---

## 📊 엔티티 데이터 구조

### JSON 응답 형식
```json
{
  "ok": true,
  "profile": "meeting",
  "total_count": 8,
  "entities": [
    {
      "type": "agenda",
      "content": "마케팅 예산 증액",
      "fields": {
        "topic": "예산",
        "content": "다음 분기 마케팅 예산"
      },
      "confidence": 0.92,
      "position": {
        "start": 45,
        "end": 67
      }
    },
    {
      "type": "decision",
      "content": "마케팅 예산 20% 증액 승인",
      "fields": {
        "content": "마케팅 예산 20% 증액",
        "status": "승인"
      },
      "confidence": 0.95,
      "position": {
        "start": 123,
        "end": 156
      }
    }
  ],
  "source_text": "2026년 Q1 마케팅 전략 회의..."
}
```

---

## 🚧 향후 개선 계획

### 단기
- [ ] 엔티티 검색 기능
- [ ] 엔티티 정렬 (신뢰도, 타입, 시간순)
- [ ] 엔티티 클릭 시 원본 텍스트 하이라이트
- [ ] JSON/CSV 내보내기 기능

### 중기
- [ ] 엔티티 간 관계 시각화 (그래프)
- [ ] 타임라인 뷰 (시간순 정렬)
- [ ] 커스텀 필터 (AND/OR 조건)
- [ ] 엔티티 편집 및 재분류

### 장기
- [ ] 실시간 협업 (WebSocket)
- [ ] 엔티티 버전 관리
- [ ] AI 기반 엔티티 추천
- [ ] 다국어 지원

---

## 🎓 사용 팁

### Tip 1: 프로필 선택
올바른 프로필을 선택하면 더 정확한 엔티티 추출:
- 회의 녹취록 → **회의록** 프로필
- 기술 블로그 → **기술 리뷰** 프로필
- 연구 논문 → **리서치** 프로필
- 기타 → **일반** 프로필

### Tip 2: 여러 소스 결합
관련된 여러 소스를 한 번에 추가하면:
- 통합된 엔티티 추출
- 중복 제거
- 더 풍부한 컨텍스트

### Tip 3: 필터 활용
엔티티가 많을 때:
- 타입별 필터로 빠른 탐색
- 신뢰도 낮은 엔티티 확인
- 특정 필드 검색

### Tip 4: 시각화와 병행
- **엔티티 뷰어**: 구조화된 정보 확인
- **시각화**: 원본 텍스트 맥락 확인
- 두 기능을 함께 사용하면 최고의 이해도!

---

## 🔗 관련 문서

- **[LANGEXTRACT_USAGE.md](LANGEXTRACT_USAGE.md)** - LangExtract 사용법 및 역할
- **[QUICKSTART.md](QUICKSTART.md)** - 빠른 시작 가이드
- **[TROUBLESHOOTING.md](TROUBLESHOOTING.md)** - 문제 해결

---

## 📝 요약

**엔티티 뷰어**는 LangExtract의 강력한 구조화 추출 기능을 **시각적으로 완벽하게 표현**하는 현대적인 UI입니다.

| 특징 | 설명 |
|------|------|
| **디자인** | 다크 테마, 그라데이션, 애니메이션 |
| **카드 UI** | 타입별 색상, 아이콘, 신뢰도 표시 |
| **필터링** | 전체/타입별 빠른 전환 |
| **통계** | 개수, 타입, 신뢰도 요약 |
| **반응형** | 모바일, 태블릿, 데스크톱 지원 |
| **URL** | http://127.0.0.1:8501/entities |

**지금 바로 사용해보세요!** 🚀

```bash
# Web UI 실행
python -m src.main ui

# 엔티티 뷰어 열기
# 브라우저: http://127.0.0.1:8501
# 왼쪽 패널 하단의 📦 버튼 클릭
```
